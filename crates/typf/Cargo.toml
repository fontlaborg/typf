[package]
name = "typf"
version.workspace = true
authors.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
repository.workspace = true

[[example]]
name = "basic"
path = "../../examples/basic.rs"
required-features = ["export-pnm", "minimal"]

[[example]]
name = "pipeline"
path = "../../examples/pipeline.rs"
required-features = ["export-pnm", "minimal"]

[[example]]
name = "formats"
path = "../../examples/formats.rs"
required-features = ["export-pnm", "minimal"]

[[example]]
name = "harfbuzz"
path = "../../examples/harfbuzz.rs"
required-features = ["fontdb", "shaping-hb"]

[[example]]
name = "variable_fonts"
path = "../../examples/variable_fonts.rs"
required-features = ["shaping-hb"]

[[example]]
name = "long_text_handling"
path = "../../examples/long_text_handling.rs"
required-features = ["export-svg", "shaping-hb"]

[[example]]
name = "quickstart_backends"
path = "../../examples/quickstart_backends.rs"
required-features = ["minimal"]

[[bench]]
harness = false
name = "pipeline_bench"
path = "../../benches/pipeline_bench.rs"

[dependencies]
console_error_panic_hook = { version = "0.1", optional = true }
log = { workspace = true }
# External dependencies
thiserror = { workspace = true }
typf-core = { workspace = true }
typf-export = { workspace = true, optional = true }
typf-fontdb = { workspace = true, optional = true }
typf-input = { workspace = true, optional = true }
typf-render-cg = { workspace = true, optional = true }
# Rendering backends
typf-render-json = { workspace = true, optional = true }
typf-render-opixa = { workspace = true, optional = true }
typf-render-skia = { workspace = true, optional = true }
typf-render-vello-cpu = { workspace = true, optional = true }
typf-render-vello = { workspace = true, optional = true }
typf-render-zeno = { workspace = true, optional = true }
typf-shape-ct = { workspace = true, optional = true }
typf-shape-hb = { workspace = true, optional = true }
typf-shape-icu-hb = { workspace = true, optional = true }
# Shaping backends
typf-shape-none = { workspace = true, optional = true }
typf-unicode = { workspace = true, optional = true }
wasm-bindgen = { version = "0.2", optional = true }

[dev-dependencies]
criterion = "0.5"
typf-export = { workspace = true }
typf-render-opixa = { workspace = true }
typf-render-skia = { workspace = true }
typf-render-vello-cpu = { workspace = true }
typf-render-zeno = { workspace = true }
typf-shape-none = { workspace = true }

[features]
default = ["export-pnm", "fontdb", "minimal", "unicode"]
auto-backend = []  # Auto-select best backend for platform
console_error_panic_hook = ["dep:console_error_panic_hook"]
export-pdf = []  # Future: requires pdf writer
export-png = []  # Future: requires image crate
# Export formats
export-pnm = ["dep:typf-export"]
export-svg = []  # Future: requires svg crate
fontdb = ["dep:typf-fontdb"]
# Full build with all features
full = [
  "export-pnm",
  "fontdb",
  "input",
  "render-cg",
  "render-json",
  "render-opixa",
  "render-skia",
  "render-vello-cpu",
  "render-zeno",
  "shaping-ct",
  "shaping-hb",
  "shaping-icu-hb",
  "shaping-none",
  "unicode",
]
input = ["dep:typf-input"]
# Minimal configuration (no external dependencies)
minimal = ["render-opixa", "shaping-none"]
parallel = []  # Enable parallel processing
render-cg = ["dep:typf-render-cg"]
# Rendering backends
render-json = ["dep:typf-render-json"]
render-mac = ["render-cg"]  # Alias for CoreGraphics
render-opixa = ["dep:typf-render-opixa"]
render-skia = ["dep:typf-render-skia"]
render-vello-cpu = ["dep:typf-render-vello-cpu"]
render-vello = ["dep:typf-render-vello"]
render-win = []  # Future: ["dep:typf-render-win"] - requires Windows
render-zeno = ["dep:typf-render-zeno"]
shaping-ct = ["dep:typf-shape-ct"]
shaping-hb = ["dep:typf-shape-hb"]
shaping-icu-hb = ["dep:typf-shape-icu-hb", "unicode"]
shaping-mac = ["shaping-ct"]  # Alias for CoreText
# Shaping backends
shaping-none = ["dep:typf-shape-none"]
shaping-win = []  # Future: ["dep:typf-shape-win"] - requires Windows
# Advanced features
simd = []  # Enable SIMD optimizations
# Component features
unicode = ["dep:typf-unicode"]
wasm = ["dep:wasm-bindgen"]
